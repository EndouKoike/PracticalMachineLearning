# Introduction

The goal of this project is to be predicted how 6 participants perform barbell lifts using data from accelerometers. They were asked to perform them correctly and incorrectly in 5 different ways wearing tracking devices on the belt, forearm, arm, and dumbell.  
```{r, echo = FALSE}
load("./RF_Model.RData")
```
# Load libraries, data and treat missing values

Loading pml-training.csv as "data" and pml-tesing.csv as "testing" directly from the web source files. In reading of .csv files i set as nulls values missing or broken data ("NA","#DIV/0!", "").
```{r, echo = FALSE}
library(caret)
library(randomForest)
library(doMC)
```
```{r, eval = FALSE}
training_sourcedata <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv"
testing_sourcedata <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv"
data <- read.csv(training_sourcedata, na.strings = c("NA","#DIV/0!", ""))
testing <- read.csv(testing_sourcedata, na.strings = c("NA","#DIV/0!", ""))
```
Data sets information:

|    Data set     | Observations | Variables |
|:---------------:|:------------:|:---------:|
| training (data) |     19.622   |    160    |
| tesing          |       20     |    160    |



# Cleaning data 

For the best modeling fit, data sets must be cleaned from null and not useful values.
```{r, eval = FALSE}
# Keep only columns without missing values
data <- data[, colSums(is.na(data)) == 0] 
testing <- testing[, colSums(is.na(testing)) == 0]

# Remove first 2 columns -not usefull ("X", "user_name")
data <- data[c(-1, -2)]
testing <- testing[c(-1, -2)]
```

# Data splitting and modelling

The training data set ("data") is being splitted in two parts, training data set 60% and validate data set 40% using caret packet. For reproducible purpose i set seed into 1986. I choose to use Random Forest (rf) algorithm because is able to classify large amounts of data with accuracy and also gives estimates of what variables are important in the classification with train contol 5 fold cross-validation ([more info](http://topepo.github.io/caret/training.html#control)).
```{r, eval = FALSE}
set.seed(1986)
inTrain <- createDataPartition(data$classe, p = 0.6, list = FALSE)
training <- data[inTrain,]
validate <- data[-inTrain,]
```

Before i start running the rf model i use caret packet for parallel processing to minimize the calculation time ([more info](http://topepo.github.io/caret/parallel.html)).
```{r, echo = FALSE}
registerDoMC(cores = 6) # Numbers of cores
```
```{r, eval = FALSE}
registerDoMC(cores = 6) # Numbers of cores

modFit <- train(classe ~ ., data = training, method = "rf",
                trainControl = trainControl(method = "cv", number = 5), 
                prox = TRUE, allowParallel = TRUE)
```
As we can see in Appendix Fig.1 from the results of training model the estimate of error rate is 0.09% with 0.99 accurancy and i continue for validation on the validate data set.

```{r, eval = FALSE}
predict <- predict(modFit, validate)
```
In Appendix, Fig.2 we can see from the results of the validation, the accuracy is 0.99

# Predicting on original testing data set

Finally i apply the model to original testing data set.
```{r}
final <- predict(modFit, testing)
final
```


# Appendix
Fig.1: Results of training model
```{r, echo = FALSE}
modFit
modFit$finalModel
```

Fig.2: Results of validate data set
```{r, echo = FALSE}
predict <- predict(modFit, validate)
confusionMatrix(validate$classe, predict)
```